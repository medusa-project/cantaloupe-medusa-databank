# This script mounts various AWS S3 buckets onto the filesystem using
# rclone.
#
# See:
# https://rclone.org/s3/
# https://rclone.org/commands/rclone_mount/
#

VFS_CACHE_MODE=off
VFS_READ_CHUNK_SIZE=4M
VFS_READ_CHUNK_SIZE_LIMIT=0

# medusa-main
rclone mount aws-prod:medusa-demo-main $HOME/buckets/medusa-demo-main \
    --log-file=/home/iiif/log/rclone/medusa-main.log \
    --vfs-cache-mode $VFS_CACHE_MODE \
    --vfs-read-chunk-size $VFS_READ_CHUNK_SIZE \
    --vfs-read-chunk-size-limit $VFS_READ_CHUNK_SIZE_LIMIT &

# medusa-prod-main
rclone mount aws-prod:medusa-main $HOME/buckets/medusa-main \
    --log-file=/home/iiif/log/rclone/medusa-prod-main.log \
    --vfs-cache-mode $VFS_CACHE_MODE \
    --vfs-read-chunk-size $VFS_READ_CHUNK_SIZE \
    --vfs-read-chunk-size-limit $VFS_READ_CHUNK_SIZE_LIMIT &

# databank-main
rclone mount aws-prod:databank-demo-main $HOME/buckets/databank-demo-main \
    --log-file=/home/iiif/log/rclone/databank-main.log \
    --vfs-cache-mode $VFS_CACHE_MODE \
    --vfs-read-chunk-size $VFS_READ_CHUNK_SIZE \
    --vfs-read-chunk-size-limit $VFS_READ_CHUNK_SIZE_LIMIT &
